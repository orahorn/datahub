# Журналирование событий и ведение статистики работы ИУС

Опытный системный администратор первым делом на только что установленом сервере,
иногда даже до его полной настройки включает запись журналов и файлов со
статистикой.
Это нужно для своевременного понимания характеристик работы системы:

* чтобы не пропустить важное событие на сервере или сбой
* регулировка и распределение нагрузки на части системы уже на этапе установки
* наблюдение за работой сервера удалённо и последующего его мониторинга

## Сервисы ОС по записи событий

### syslog

По сути регистрацию событий составляет специальный серис,
который в классическом Unix реализовывался syslogd, заменённый частью systemd (см. далее)
в наши дни.
Также в пакет bsdutils входит программа logger которая в файлах журнала оставляет записи.

Пример будет работать на системах старого типа:

Включаем мониторинг всех записей основного системного журнала:

	$ tail -0f syslog

В другом терминале отправляем сообщение в журнал:

	$ logger hello

В терминале с мониторинга выходит сообщение:

```
$ tail -0f syslog
Nov  3 23:21:02 brix dron: hello
```

Здесь в строке: дата и время события, имя хоста, пользователь ОС который сгенерировал событие через
syslog API и через двоеточие (:), собственно, само сообщение (в данном примере hello).

Данную технику можно использовать для отладки скриптов оболочки ОС, либо ведения журналов.

В примере показано и важно понимать, что syslog - это не только ПО, но и сетевой протокол.
Он регламентирует с помощью разных документов формат передачи событий по разным машинам на сети.
Есть специально выделенные сервера, которых от других машин централизованно хранят журналы,
события от которых можно сверять и корреляция может сказать, что в целом произошло на сети...


### syslogng

###  Подсистема systemd и средство journalctl


## Библиотеки журналирования приложений

### POSIX

В стандартной библиотеке C стандарт POSIX
определяет заголовочный файл:

```c
#include <syslog.h>
```

## Анализаторы логов

### Статистика по логам

### logtool

## системы ведения статистики

### sysstat, sar, ksar


## Прикладные сервисы журналирования проекта Apache

Сервисы [Apache logging](https://logging.apache.org/) предназначены
для предоставления однообразных интерфейсов программирования к разным языкам программирования (ЯП)
для сохранения журналов регистрации событий, генерируемых приложениями.
Объединяет эти библиотеки-сервисы журналирования то, что они используют
для настроек конфигурационне XML-файлы, в отличае от Unix'овых `/etc/syslog.conf`.


### Java

Всё началось  с программного обеспечения (ПО) [log4j](https://logging.apache.org/log4j/) для языка проагрммирования Java.




### C++

**log4c++**

**log4cpp**

* [Apache log4cxx](https://logging.apache.org/log4cxx/)

### C#

* Apache [log4net](https://ru.wikipedia.org/wiki/Apache_log4net)

### Классический Си

Сервис [log4c](http://log4c.sourceforge.net/) физически не включён в Apache инкубатор ПО,
но использует ту же идеологию, что и Log4J.

### Perl

## Источники информации


